# 5 格式化生成集成
任务：格式化生成具有特定结构的数据

## 5.1 需求分析
- RAG 驱动的电商客服：当用户询问“推荐几款适合程序员的键盘”时，我们希望 LLM 返回一个包含产品名称、价格、特性和购买链接的 JSON 列表，而不是一段描述性文字，以便前端直接渲染成商品卡片。
- 自然语言转 API 调用：用户说“帮我查一下明天从上海到北京的航班”，系统需要将这句话解析成一个结构化的 API 请求，如 {"departure": "上海", "destination": "北京", "date": "2025-07-18"}。
- 数据自动提取：从一篇新闻文章中，自动抽取出事件、时间、地点、涉及人物等关键信息，并以结构化形式存入数据库。

## 5.2 几种实现方法
LangChain OutputParsers：结合one shot prompt 和 Pydantic模型，让 LLM 输出解析成结构化的数据。
- **StrOutputParser**
- **JsonOutputParser**
- **PydanticOutputParser**

LlamaIndex 组件：响应合成（Response Synthesis）和结构化输出（Structured Output）。

Prompt Engineering：结合 Prompt Template 和 语法定义，让 LLM 输出解析成结构化的数据。

## 5.3 Function Calling
类似使用agent和MCP来实现